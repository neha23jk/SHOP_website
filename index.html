<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashMart - Fast Local Shopping</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                FlashMart
            </a>
            <div class="search-bar">
                <input type="text" class="search-input" id="search-input" placeholder="Search for products...">
                <button class="search-btn" onclick="handleSearch()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </button>
            </div>
            <div class="header-actions">
                <span id="user-info">Guest</span>
                <a href="login.html" class="btn btn-secondary" id="login-btn">Login</a>
                <button class="btn btn-secondary" id="logout-btn" onclick="handleLogout()" style="display: none;">Logout</button>
                <a href="cart.html" class="btn btn-primary cart-btn">
                    Cart
                    <span class="cart-badge" id="cart-badge">0</span>
                </a>
            </div>
        </div>
    </header>

    
    <nav class="nav-menu">
        <div class="nav-container">
            <a href="index.html" class="nav-link">Home</a>
            <a href="products.html?category=groceries" class="nav-link">Groceries</a>
            <a href="products.html?category=snacks" class="nav-link">Snacks</a>
            <a href="products.html?category=personal-care" class="nav-link">Personal Care</a>
            <a href="products.html?category=electronics" class="nav-link">Electronics</a>
            <a href="products.html?category=stationery" class="nav-link">Stationery</a>
            <a href="products.html?category=home-essentials" class="nav-link">Home Essentials</a>
            <a href="products.html" class="nav-link">All Products</a>
            <a href="account.html" class="nav-link">Account</a>
        </div>
    </nav>

    
    <section class="hero">
        <div class="hero-carousel" id="hero-carousel" aria-label="Promotions">
            <div class="carousel-track" id="carousel-track">
                
            </div>
            <div class="carousel-dots" id="carousel-dots" aria-hidden="true"></div>
        </div>
    </section>

    
    <section class="categories">
        <h2 class="section-title">Shop by Category</h2>
        <div class="categories-grid">
            <a href="products.html?category=groceries" class="category-card">
                <div class="category-icon">üõí</div>
                <div class="category-name">Groceries</div>
            </a>
            <a href="products.html?category=snacks" class="category-card">
                <div class="category-icon">üçø</div>
                <div class="category-name">Snacks</div>
            </a>
            <a href="products.html?category=personal-care" class="category-card">
                <div class="category-icon">üíÜ</div>
                <div class="category-name">Personal Care</div>
            </a>
            <a href="products.html?category=electronics" class="category-card">
                <div class="category-icon">üì±</div>
                <div class="category-name">Electronics</div>
            </a>
            <a href="products.html?category=stationery" class="category-card">
                <div class="category-icon">‚úèÔ∏è</div>
                <div class="category-name">Stationery</div>
            </a>
            <a href="products.html?category=home-essentials" class="category-card">
                <div class="category-icon">üè†</div>
                <div class="category-name">Home Essentials</div>
            </a>
        </div>
    </section>

    
    <section class="products-section">
        <h2 class="section-title">Featured Products</h2>
        <div class="products-grid" id="featured-products">
           
        </div>
    </section>

    
    <script src="data/products.js"></script>
    <script src="js/app.js"></script>
    <script>
        
        const heroImages = [
            'assets/Home Screen Scroller/1.png',
            'assets/Home Screen Scroller/2.png',
            'assets/Home Screen Scroller/3.png',
            'assets/Home Screen Scroller/4.png',
            'assets/Home Screen Scroller/5.png'
        ];
        let currentSlide = 0;
        function initCarousel() {
            const track = document.getElementById('carousel-track');
            const dots = document.getElementById('carousel-dots');
            if (!track || !dots) return;
            track.innerHTML = heroImages.map((src, i) => `
                <div class="carousel-slide${i===0?' active':''}">
                    <img src="${src}" alt="FlashMart banner ${i+1}">
                </div>
            `).join('');
            dots.innerHTML = heroImages.map((_, i) => `
                <button class="dot${i===0?' active':''}" aria-label="Go to slide ${i+1}" onclick="goToSlide(${i})"></button>
            `).join('');
            setInterval(nextSlide, 4000);
        }
        function nextSlide() {
            goToSlide((currentSlide + 1) % heroImages.length);
        }
        function goToSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dots .dot');
            if (!slides.length) return;
            slides[currentSlide]?.classList.remove('active');
            dots[currentSlide]?.classList.remove('active');
            currentSlide = index;
            slides[currentSlide]?.classList.add('active');
            dots[currentSlide]?.classList.add('active');
        }

        
        function handleSearch() {
            const query = document.getElementById('search-input').value.trim();
            if (query) {
                window.location.href = `products.html?search=${encodeURIComponent(query)}`;
            }
        }

       
        document.getElementById('search-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        
        function handleLogout() {
            FlashMartStorage.logoutUser();
            FlashMartStorage.updateUserInfo();
            FlashMartStorage.updateCartBadge();
            window.location.href = 'index.html';
        }

        
        function loadFeaturedProducts() {
            const products = FlashMartStorage.getProducts();
            const featured = products.slice(0, 8); 
            const container = document.getElementById('featured-products');
            
            container.innerHTML = featured.map(product => `
                <div class="product-card">
                    <a href="product.html?id=${product.id}" class="product-card-link">
                        <div class="product-image-wrapper">
                            <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                        </div>
                        <div class="product-info">
                            <div class="product-name">${product.name}</div>
                            <div class="product-price">${FlashMartStorage.formatPrice(product.price)}</div>
                            <div class="product-rating">
                                <span class="star">‚òÖ</span>
                                <span>${product.rating}</span>
                            </div>
                            <div class="product-stock">In Stock (${product.stock})</div>
                        </div>
                    </a>
                    <div class="product-actions">
                        <button class="btn-add-cart" onclick="addToCart(${product.id}, event)">Add to Cart</button>
                        <a href="product.html?id=${product.id}" class="btn-buy-now">Buy Now</a>
                    </div>
                </div>
            `).join('');
        }

        
        function addToCart(productId, event) {
            const button = event ? event.target : null;
            const result = FlashMartStorage.addToCart(productId, 1);
            if (result.success) {
                if (button) {
                    FlashMartStorage.animateAddToCart(productId, button);
                }
                FlashMartStorage.showToast(result.message, 'success');
                FlashMartStorage.updateCartBadge();
            } else {
                FlashMartStorage.showToast(result.message, 'error');
            }
        }

       
        document.addEventListener('DOMContentLoaded', () => {
            initCarousel();
            loadFeaturedProducts();
            FlashMartStorage.updateCartBadge();
            FlashMartStorage.updateUserInfo();
        });
    </script>
</body>
</html>

